import{a as e,x as C,F as a,I as l,S as d,N as I,T as E,k as S,l as O,O as D,Q as R,r as u,E as h,G as v,j as k,C as P,R as F,q as U}from"./index-f34e1a2a.js";import{B as q}from"./breadcrumbs-wrapper-ec233fdf.js";import{C as A,M as w}from"./custom-descriptions-319ef308.js";import{T as B,f as L}from"./index-d216eaf8.js";import{u as M}from"./use-post-category-query-1a021ce9.js";import"./common-button-725fbdf6.js";const j=({statusObj:t,...s})=>e(B,{color:t.color,className:"min-w-[120px] text-center px-2 py-1 text-sm font-medium",...s,children:t.label}),{Text:Q}=E,V=({data:t,categoryType:s})=>{const{data:n}=M(s),r=[{isRequired:!0,labelText:"Hình ảnh",descriptionElement:e(a.Item,{name:["images","avatar"],className:"m-auto text-center",children:e(C,{})})},{labelText:"Alt",descriptionElement:e(a.Item,{name:"alt",className:"mb-0",children:e(l,{placeholder:"Nhập tiêu đề"})})},{isRequired:!0,labelText:"Tiêu đề",descriptionElement:e(a.Item,{name:"title",className:"mb-0",children:e(l,{placeholder:"Nhập tiêu đề"})})},{isRequired:!0,labelText:"Tiêu đề ngắn",descriptionElement:e(a.Item,{name:"shortTitle",className:"mb-0",children:e(l,{placeholder:"Nhập tiêu đề ngắn"})})},{isRequired:!0,labelText:"Nội dung ngắn",descriptionElement:e(a.Item,{name:"shortContent",className:"mb-0",children:e(l,{placeholder:"Nhập nội dung ngắn"})})},{isRequired:!0,labelText:"Danh mục",descriptionElement:e(a.Item,{name:"postCategoryId",className:"mb-0",children:e(d,{placeholder:"Chọn danh mục bài viết",options:n})})},{labelText:"Từ khóa SEO",descriptionElement:e(a.Item,{name:"keyWords",className:"mb-0",children:e(d,{mode:"tags",placeholder:"Nhập từ khóa SEO"})})},{isShow:!!t,labelText:"Trạng thái",descriptionElement:(t==null?void 0:t.status)&&e(j,{statusObj:I[t.status]})},{isShow:!!t,labelText:"Thời điểm tạo",descriptionElement:e(Q,{children:L(t==null?void 0:t.createdAt)})}];return e(A,{labelStyle:{width:200},data:r})},J=()=>{const{id:t}=S(),[s]=a.useForm(),{value:n,setTrue:r,setFalse:m}=O(!1),{data:i,isLoading:p,isFetching:T}=D(+t),{mutate:g,isLoading:c}=R(+t),o=u.useMemo(()=>i&&{...i,images:{avatar:i.images.avatar&&i.images.avatar[128].id}},[i]);u.useEffect(()=>{s.setFieldsValue(o)},[s,o]);const b=[{key:"1",label:"Thông tin bài viết",children:e(V,{data:i,categoryType:h.INTRODUCTION})}],x=()=>{s.resetFields(),m()},N=y=>{const f=U(y,o);g(f,{onSuccess:()=>{m()}})};return e(q,{breadcrumbs:v(h.INTRODUCTION).detail,isLoading:T||c,children:k(a,{form:s,initialValues:o,onFinish:N,onValuesChange:r,children:[e(P,{title:"Thông tin bài viết",loading:p,children:e(F,{defaultActiveKey:"1",items:b})}),e("div",{className:"sticky bottom-0",children:e(w,{onOk:s.submit,onCancel:x,cancelText:"Hủy bỏ thay đổi",isCancelDisabled:!n||c,isOkLoading:c,isOkDisabled:!n})})]})})};export{J as default};
