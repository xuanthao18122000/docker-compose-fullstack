import{F as n,j as o,a as s,v as g,h as S,I as F,T as f,i as v,D as C,k as E,l as I,m as O,n as P,o as R,r as k,d as A,U as B,p as L,C as T,q as N}from"./index-f34e1a2a.js";import{B as j}from"./breadcrumbs-wrapper-ec233fdf.js";import{U as _}from"./color-select-1bdef101.js";import{D as p,M as b}from"./custom-descriptions-319ef308.js";import"./array-28fcc5c3.js";import"./common-button-725fbdf6.js";const q=({mutate:e,isLoading:i,onCancel:r,keyModal:l})=>{const[t]=n.useForm(),a=({password:d})=>{e({password:d},{onSuccess:()=>r()})},m=()=>{e({password:C},{onSuccess:()=>r()})};return l==="1"?o(n,{form:t,onFinish:a,disabled:i,children:[o(p,{bordered:!0,column:1,children:[s(p.Item,{label:"Mật khẩu mới",children:s(n.Item,{name:"password",className:"mb-0",rules:g(["required","noWhiteSpace"]).concat(S("minAndMax")(8,16)),hasFeedback:!0,children:s(F.Password,{placeholder:"Nhập mật khẩu mới"})})}),s(p.Item,{label:"Xác nhận mật khẩu mới",children:s(n.Item,{name:"confirm_password",className:"mb-0",dependencies:["password"],rules:g(["required","confirmPassword"]),hasFeedback:!0,children:s(F.Password,{placeholder:"Xác nhận mật khẩu mới"})})})]}),s(b,{onOk:t.submit,onCancel:r})]}):o(v,{children:[o(f.Text,{children:["Bạn có muốn reset mật khẩu về mặc định:"," "]}),s(f.Text,{className:"text-base",strong:!0,children:"123456a@"}),s(b,{onOk:m,onCancel:r})]})},z=()=>{const[e]=n.useForm(),{id:i}=E(),{value:r,setTrue:l,setFalse:t}=I(!1),{data:a,isLoading:m}=O(+i),{mutate:d,isLoading:u}=P(+i),{data:h}=R(),U=(h==null?void 0:h.id)===+i,c=k.useMemo(()=>a&&{...a,images:{avatar:a.images.avatar&&a.images.avatar[360].id}},[a]);k.useEffect(()=>{e.setFieldsValue(c)},[c,e]);const D=()=>{e.resetFields(),t()},w=x=>{const M=N(x,c);d(M,{onSuccess:()=>{t()}})};return s(j,{breadcrumbs:A.detail(),isLoading:u,children:o(T,{title:`Chi tiết ${B}`,loading:m,extra:s(L,{isMe:U,children:s(q,{mutate:d,isLoading:u})}),children:[s(n,{form:e,onFinish:w,onValuesChange:l,initialValues:c,children:s(_,{data:a})}),s(b,{onOk:e.submit,onCancel:D,isCancelDisabled:!r,isOkLoading:u,isOkDisabled:!r})]})})};export{z as default};
